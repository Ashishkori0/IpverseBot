# ربات IpverseBot - ربات تلگرام محدوده آی‌پی

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://python.org)
[![Aiogram](https://img.shields.io/badge/aiogram-3.12.0-blue.svg)](https://docs.aiogram.dev/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

## 📖 توضیحات

ربات IpverseBot یک ربات جامع تلگرامی است که اطلاعات محدوده آی‌پی کشورهای مختلف را ارائه می‌دهد. این ربات داده‌های ASN (شماره سیستم مستقل) را از ipinfo.io دریافت کرده و گزارش‌های دقیق محدوده آی‌پی تولید می‌کند که کاربران می‌توانند دانلود کنند.

## ✨ ویژگی‌ها

- **🌍 محدوده آی‌پی کشورها**: دریافت محدوده‌های جامع آی‌پی برای هر کشور با استفاده از کد ۲ حرفی
- **🏆 پشتیبانی چندزبانه**: پشتیبانی کامل از زبان‌های انگلیسی و فارسی
- **💰 سیستم سکه**: کاربران روزانه ۵ درخواست رایگان دارند، درخواست‌های اضافی نیاز به سکه دارد
- **👥 سیستم دعوت**: با دعوت دوستان سکه کسب کنید
- **📊 پنل مدیریت**: داشبورد کامل مدیریت با آمار و ابزارهای مدیریتی
- **🔒 مدیریت کانال**: اجبار کاربران به عضویت در کانال‌های خاص
- **📢 سیستم ارسال همگانی**: ارسال پیام به همه کاربران به‌طور همزمان
- **⚡ محدودیت درخواست**: محافظت در برابر اسپم و محدودیت نرخ درخواست
- **💾 کش هوشمند**: سیستم کش فایل برای بهبود عملکرد
- **📈 آنالیز کاربران**: ردیابی آمار کاربران و معیارهای استفاده از ربات

## 🛠️ نصب و راه‌اندازی

### پیش‌نیازها

- Python 3.8 یا بالاتر
- توکن ربات تلگرام (از [@BotFather](https://t.me/BotFather))
- شناسه کاربری تلگرام شما

### مرحله ۱: کلون کردن مخزن

```bash
git clone https://github.com/Matrix-Community-ORG/IpverseBot.git
cd IpverseBot
```

### مرحله ۲: نصب وابستگی‌ها

```bash
pip install -r requirements.txt
```

### مرحله ۳: پیکربندی متغیرهای محیطی

۱. کپی کردن فایل نمونه:
```bash
cp .env.example .env
```

۲. ویرایش فایل `.env` با تنظیمات شما:
```env
BOT_TOKEN=توکن_ربات_تلگرام_شما
ADMIN_ID=شناسه_کاربری_تلگرام_شما
```

### مرحله ۴: اجرای ربات

```bash
python main.py
```

یا استفاده از اسکریپت خودکار:
```bash
./start.sh
```

برای اجرا با Docker:
```bash
./start.sh --docker
```

## 📋 پیکربندی

تنظیمات ربات در فایل `config/settings.py` قرار دارد. تنظیمات کلیدی عبارتند از:

- **SPAM_THRESHOLD**: زمان بین دستورات غیر مدیر (پیش‌فرض: ۲ ثانیه)
- **RATE_LIMIT_REQUESTS**: حداکثر درخواست آی‌پی در دقیقه برای هر کاربر (پیش‌فرض: ۱۰)
- **RATE_LIMIT_PERIOD**: پنجره محدودیت نرخ به ثانیه (پیش‌فرض: ۶۰)
- **LOG_ENABLED**: فعال/غیرفعال کردن لاگ (پیش‌فرض: False)

## 🎯 نحوه استفاده

۱. **شروع ربات**: ارسال `/start` برای شروع
۲. **انتخاب زبان**: زبان مورد نظر خود را انتخاب کنید
۳. **عضویت در کانال‌ها**: در کانال‌های مورد نیاز عضو شوید (در صورت فعال بودن)
۴. **درخواست محدوده آی‌پی**: کد ۲ حرفی کشور ارسال کنید (مثل `US`، `IR`، `DE`)
۵. **دانلود گزارش‌ها**: فایل‌های جامع محدوده آی‌پی را دریافت کنید

## 🔧 دستورات مدیر

مدیران به ویژگی‌های خاصی دسترسی دارند:

- **پنل مدیریت**: دسترسی از طریق دکمه‌های callback پس از `/start`
- **مدیریت کانال**: افزودن/حذف کانال‌های مورد نیاز
- **تغییر اجبار عضویت**: فعال/غیرفعال کردن عضویت اجباری در کانال
- **ارسال همگانی**: ارسال پیام به همه کاربران
- **مشاهده آمار**: نظارت بر استفاده از ربات و معیارهای کاربران

## 📁 ساختار پروژه

```
IpverseBot/
├── main.py                 # نقطه ورود اصلی ربات
├── requirements.txt        # وابستگی‌های Python
├── .env.example           # قالب متغیرهای محیطی
├── .gitignore            # قوانین نادیده گیری Git
├── config/
│   └── settings.py       # پیکربندی ربات و رشته‌های زبان
├── handlers/
│   ├── user.py          # هندلرهای پیام کاربر
│   ├── admin.py         # هندلرهای پنل مدیریت
│   └── callback.py      # هندلرهای callback query
├── utils/
│   ├── db.py            # عملیات پایگاه داده (مبتنی بر JSON)
│   ├── ip_processing.py # دریافت و پردازش محدوده آی‌پی
│   ├── telegram.py      # توابع کمکی تلگرام
│   └── logging.py       # ابزارهای لاگ
└── data/
    ├── users.json       # پایگاه داده کاربران
    ├── ip_files.json    # پایگاه داده کش فایل‌های آی‌پی
    ├── settings.json    # تنظیمات ربات
    └── ip_cache/        # فایل‌های کش شده محدوده آی‌پی
```

## 🐳 استقرار با Docker

### استفاده از Docker Compose (توصیه شده)

```bash
docker-compose up -d
```

### ساخت و اجرای دستی

```bash
docker build -t ipversebot .
docker run -d --env-file .env --name ipversebot ipversebot
```

## 🤝 مشارکت

۱. مخزن را Fork کنید
۲. یک شاخه ویژگی ایجاد کنید (`git checkout -b feature/amazing-feature`)
۳. تغییرات خود را commit کنید (`git commit -m 'Add amazing feature'`)
۴. به شاخه push کنید (`git push origin feature/amazing-feature`)
۵. یک Pull Request باز کنید

برای جزئیات بیشتر، [راهنمای مشارکت](CONTRIBUTING.md) را مطالعه کنید.

## 📞 پشتیبانی

- **انجمن انگلیسی**: [@MatrixORG](https://t.me/MatrixORG)
- **انجمن فارسی**: [@MatrixFa](https://t.me/MatrixFa)
- **گروه چت**: [@DD0SChat](https://t.me/DD0SChat)

## 📄 مجوز

این پروژه تحت مجوز MIT منتشر شده است - برای جزئیات فایل [LICENSE](LICENSE) را مشاهده کنید.

## 👥 تیم سازنده

**Matrix Team** - تیم توسعه‌دهنده این پروژه

---

**با ❤️ توسط Matrix Team ساخته شده**
